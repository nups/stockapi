<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Stock Watchlist - Redirecting...</title>
    <script type="text/javascript">
        // GitHub Pages SPA redirect handler
        // This script takes the current URL and redirects to the main app
        // with the path and query parameters preserved in the hash
        
        // GitHub Pages SPA redirect for /stockapi routes
        var l = window.location;
        var path = l.pathname;
        var search = l.search;
        
        console.log('404 handler - Current path:', path, 'Search:', search);
        
        // If this is a /stockapi route, redirect to /stockapi/ with route info
        if (path.startsWith('/stockapi/')) {
            // Extract the route after /stockapi/
            var route = path.substring('/stockapi/'.length);
            var redirectUrl = l.protocol + '//' + l.hostname + '/stockapi/';
            
            // Preserve the route and search params for the SPA
            if (route || search) {
                redirectUrl += '?';
                if (route) {
                    redirectUrl += '/' + route;
                }
                if (search) {
                    redirectUrl += (route ? '&' : '') + search.slice(1).replace(/&/g, '~and~');
                }
            }
            
            console.log('Redirecting to:', redirectUrl);
            l.replace(redirectUrl);
        } else {
            // For other 404s, redirect to /stockapi/
            console.log('Non-stockapi 404, redirecting to /stockapi/');
            l.replace(l.protocol + '//' + l.hostname + '/stockapi/');
        }
    </script>
</head>
<body>
    <div style="text-align: center; margin-top: 50px; font-family: Arial, sans-serif;">
        <h2>ðŸ“ˆ Stock Watchlist</h2>
        <p>Redirecting to app...</p>
        <p>If you're not redirected automatically, <a href="/">click here</a>.</p>
    </div>
</body>
</html>